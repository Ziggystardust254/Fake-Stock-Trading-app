<title>Fake Stock App</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');
    * {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
html, body {
margin: 0;
padding: 0;
@@ -110,20 +116,13 @@
<div class="bottom-pattern" id="positionInfo"></div>
</div>
<script>
    // Restore original JS logic for stock chart and controls.
const canvas = document.getElementById('chart');
const ctx = canvas.getContext('2d');
function resize() { canvas.width = canvas.clientWidth; canvas.height = canvas.clientHeight; }
    window.addEventListener('resize', resize);
    resize();
    let startingPrice = 167.4;
    let price = startingPrice;
    let history = Array(100).fill(price);
    let entryPrice = null;
    let entryQty = 0;
    let mode = null;
    const priceEl = document.getElementById('price');
    const profitDisplay = document.getElementById('profitDisplay');
    window.addEventListener('resize', resize); resize();
    let startingPrice = 167.4, price = startingPrice;
    let history = Array(100).fill(price), entryPrice = null, entryQty = 0, mode = null;
    const priceEl = document.getElementById('price'), profitDisplay = document.getElementById('profitDisplay');
const positionInfo = document.getElementById('positionInfo');
function updatePositionInfo() {
if (entryQty > 0) {
@@ -133,85 +132,56 @@
}
document.getElementById('btnTradeBuy').onclick = () => {
if (mode !== 'buy') { entryPrice = price; entryQty = 0; mode = 'buy'; }
      entryQty += 10000;
      updatePositionInfo();
      entryQty += 10000; updatePositionInfo();
};
document.getElementById('btnTradePuts').onclick = () => {
if (mode !== 'puts') { entryPrice = price; entryQty = 0; mode = 'puts'; }
      entryQty += 10000;
      updatePositionInfo();
      entryQty += 10000; updatePositionInfo();
};
document.getElementById('btnTradeSell').onclick = () => {
if (entryPrice != null) {
let profit = mode === 'puts' ? (entryPrice - price) * entryQty : (price - entryPrice) * entryQty;
profitDisplay.textContent = `Profit: $${profit.toFixed(2)}`;
profitDisplay.style.color = profit < 0 ? '#ff4d4d' : '#00ff7f';
        entryPrice = null; entryQty = 0; mode = null;
        updatePositionInfo();
        entryPrice = null; entryQty = 0; mode = null; updatePositionInfo();
}
};
['btn1D','btn1W','btn1M'].forEach(id => document.getElementById(id).onclick = () => {});
    let lastTap = 0, touchDir = 0, touchMult = 1;
    let lastTap=0, touchDir=0, touchMult=1;
document.addEventListener('touchstart', e => {
      const t = e.touches[0];
      const now = Date.now();
      const isDouble = now - lastTap < 300;
      lastTap = now;
      const x = t.clientX;
      const y = t.clientY;
      const w = window.innerWidth;
      const h = window.innerHeight;
      // Bottom-left quadrant: force down, Top-right quadrant: force up
      if (x < w/2 && y > h/2) {
        touchDir = -1;
        touchMult = isDouble ? 2 : 1;
      } else if (x > w/2 && y < h/2) {
        touchDir = 1;
        touchMult = isDouble ? 2 : 1;
      } else {
        touchDir = 0;
        touchMult = 1;
      }
    });
      const isDouble = now - lastTap < 300;
      lastTap = now;
      touchDir = touch.clientX > window.innerWidth/2 ? 1 : -1;
      touchMult = isDouble ? 2 : 1;
      const t=e.touches[0], now=Date.now(), db=now-lastTap<300;
      lastTap=now;
      const x=t.clientX, y=t.clientY, w=window.innerWidth, h=window.innerHeight;
      if(x<w/2 && y>h/2) { touchDir=-1; touchMult=db?2:1; }
      else if(x<w/2 && y<h/2) { touchDir=1; touchMult=db?2:1; }
      else { touchDir=0; touchMult=1; }
});
    let keys = {};
    document.addEventListener('keydown', e => keys[e.key] = true);
    document.addEventListener('keyup', e => keys[e.key] = false);
    let keys={}; document.addEventListener('keydown',e=>keys[e.key]=true); document.addEventListener('keyup',e=>keys[e.key]=false);
function updateStock() {
let dir;
      if (touchDir) dir = touchDir * (touchMult * 3);
      else if (keys['ArrowUp']||keys['ArrowDown']) dir = keys['ArrowUp'] ? (keys['Shift']?6:3) : -(keys['Shift']?6:3);
      else dir = (Math.random()<0.5?1:-1)*(Math.random()*1.2+0.5);
      let change = dir * (Math.random()*0.4+0.1);
      price = Math.max(1, price + change);
      priceEl.textContent = `$${price.toFixed(2)}`;
      priceEl.className = `stock-price ${change>=0?'price-up':'price-down'}`;
      if (entryPrice != null) updatePositionInfo();
      history.push(price);
      if (history.length>100) history.shift();
      drawChart();
      touchDir = 0; touchMult = 1;
      if(touchDir) dir=touchDir*(touchMult*3);
      else if(keys['ArrowUp']||keys['ArrowDown']) dir = keys['ArrowUp']?(keys['Shift']?6:3):-(keys['Shift']?6:3);
      else dir=(Math.random()<0.5?1:-1)*(Math.random()*1.2+0.5);
      let change=dir*(Math.random()*0.4+0.1);
      price=Math.max(1,price+change);
      priceEl.textContent=`$${price.toFixed(2)}`;
      priceEl.className=`stock-price ${change>=0?'price-up':'price-down'}`;
      if(entryPrice!=null) updatePositionInfo();
      history.push(price); if(history.length>100) history.shift(); drawChart(); touchDir=0; touchMult=1;
}
    function drawChart() {
    function drawChart(){
ctx.clearRect(0,0,canvas.width,canvas.height);
      const max = Math.max(...history, startingPrice);
      const min = Math.min(...history, startingPrice);
      const range = max-min||1;
      const padding = 10;
      const y0 = canvas.height - ((startingPrice-min)/range)*(canvas.height-2*padding) - padding;
      const max=Math.max(...history,startingPrice), min=Math.min(...history,startingPrice), range=max-min||1, pad=10;
      const y0=canvas.height-((startingPrice-min)/range)*(canvas.height-2*pad)-pad;
ctx.setLineDash([5,3]); ctx.strokeStyle='#888'; ctx.beginPath(); ctx.moveTo(0,y0); ctx.lineTo(canvas.width,y0); ctx.stroke(); ctx.setLineDash([]);
ctx.fillStyle='#888'; ctx.font='10px sans-serif';
      for(let i=0;i<=4;i++){ const y=padding+i*((canvas.height-2*padding)/4); const v=max-i*(range/4); ctx.fillText(`$${v.toFixed(2)}`,0,y); }
      for(let i=0;i<=4;i++){ const y=pad+i*((canvas.height-2*pad)/4), v=max-i*(range/4); ctx.fillText(`$${v.toFixed(2)}`,0,y); }
for(let i=0;i<=5;i++){ const x=i*(canvas.width/5); ctx.fillText(`${i*5+10}:00`,x,canvas.height-5); }
      ctx.beginPath(); history.forEach((v,i)=>{ const x=(i/(history.length-1))*canvas.width; const y=canvas.height-((v-min)/range)*(canvas.height-2*padding)-padding; i===0?ctx.moveTo(x,y):ctx.lineTo(x,y); });
      const recent = history[history.length-1]-history[history.length-5]||0;
      ctx.strokeStyle=recent<-2?'#ff4d4d':'#0cc'; ctx.lineWidth=2; ctx.shadowColor=ctx.strokeStyle; ctx.shadowBlur=10; ctx.stroke(); ctx.shadowBlur=0;
      ctx.beginPath(); history.forEach((v,i)=>{ const x=(i/(history.length-1))*canvas.width; const y=canvas.height-((v-min)/range)*(canvas.height-2*pad)-pad; i===0?ctx.moveTo(x,y):ctx.lineTo(x,y); });
      const rc=history[history.length-1]-history[history.length-5]||0;
      ctx.strokeStyle=rc<-2?'#ff4d4d':'#00ffcc'; ctx.lineWidth=2; ctx.shadowColor=ctx.strokeStyle; ctx.shadowBlur=10; ctx.stroke(); ctx.shadowBlur=0;
}
    setInterval(updateStock, 500);
    setInterval(updateStock,500);
</script>
</body>
</html>
